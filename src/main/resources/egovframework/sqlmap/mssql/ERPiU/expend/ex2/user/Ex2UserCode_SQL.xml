<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- ERPiU mssql -->
<mapper namespace="Ex2UserCode">
	<!-- ERPiU 코드 조회 xml -->
	<select id="Ex2UserCode.Ex2UserCodeCommonCodeListSelect"
		parameterType="java.util.Map" resultType="java.util.Map"><![CDATA[
		/*
		 * [ ERPiU - MSSQL ] Ex2UserCode.Ex2UserCodeCommonCodeListSelect - ERPiU 공통코드 조회
		 * 작성자 : 김상겸
		 * 작성일 : 2019-08-28
		 * 변경이력
		 * - 2019-08-28 / 김상겸 : mssql <> oracle 비교 보완
		 */
		
		/* 접대비등록 - 사용구분 (FI_T000024) */
		/*	────────────┬───────────────┬───────────────┬───────────────┬───────────────┬──────────	*/
		/*	CD_COMPANY	│	CD_FIELD	│	NM_FIELD	│	CD_SYSDEF	│	NM_SYSDEF	│	USE_YN	*/
		/*	────────────┼───────────────┼───────────────┼───────────────┼───────────────┼──────────	*/
		/*	10000		│	FI_T000024	│	접대구분		│	001			│	신용카드		│	Y		*/
		/*	────────────┼───────────────┼───────────────┼───────────────┼───────────────┼──────────	*/
		/*	10000		│	FI_T000024	│	접대구분		│	002			│	현금			│	Y		*/
		/*	────────────┴───────────────┴───────────────┴───────────────┴───────────────┴──────────	*/
		
		/* 접대비등록 - 증빙구분 (FI_T000025) */
		/*	────────────┬───────────────┬───────────────┬───────────────┬───────────────────────────┬──────────	*/
		/*	CD_COMPANY	│	CD_FIELD	│	NM_FIELD	│	CD_SYSDEF	│	NM_SYSDEF				│	USE_YN	*/
		/*	────────────┼───────────────┼───────────────┼───────────────┼───────────────────────────┼──────────	*/
		/*	10000		│	FI_T000025	│	증빙구분		│	001			│	신용카드매출전표				│	Y		*/
		/*	────────────┼───────────────┼───────────────┼───────────────┼───────────────────────────┼──────────	*/
		/*	10000		│	FI_T000025	│	증빙구분		│	002			│	세금계산서					│	Y		*/
		/*	────────────┼───────────────┼───────────────┼───────────────┼───────────────────────────┼──────────	*/
		/*	10000		│	FI_T000025	│	증빙구분		│	003			│	금전등록기계산서				│	Y		*/
		/*	────────────┼───────────────┼───────────────┼───────────────┼───────────────────────────┼──────────	*/
		/*	10000		│	FI_T000025	│	증빙구분		│	004			│	영수증					│	Y		*/
		/*	────────────┼───────────────┼───────────────┼───────────────┼───────────────────────────┼──────────	*/
		/*	10000		│	FI_T000025	│	증빙구분		│	005			│	계산서					│	Y		*/
		/*	────────────┼───────────────┼───────────────┼───────────────┼───────────────────────────┼──────────	*/
		/*	10000		│	FI_T000025	│	증빙구분		│	006			│	현금영수증					│	Y		*/
		/*	────────────┼───────────────┼───────────────┼───────────────┼───────────────────────────┼──────────	*/
		/*	10000		│	FI_T000025	│	증빙구분		│	007			│	원천징수영수증(비사업자)		│	Y		*/
		/*	────────────┼───────────────┼───────────────┼───────────────┼───────────────────────────┼──────────	*/
		/*	10000		│	FI_T000025	│	증빙구분		│	008			│	송금명세서					│	Y		*/
		/*	────────────┼───────────────┼───────────────┼───────────────┼───────────────────────────┼──────────	*/
		/*	10000		│	FI_T000025	│	증빙구분		│	009			│	증빙없음					│	Y		*/
		/*	────────────┴───────────────┴───────────────┴───────────────┴───────────────────────────┴──────────	*/
		
		SELECT	A.CD_FIELD AS masterCode
				, A.NM_FIELD AS masterCodeName
				, B.CD_SYSDEF AS detailCode
				, B.NM_SYSDEF AS detailCodeName
		FROM	(
					/* ERPiU 공통코드 마스터 */
					SELECT	CD_COMPANY
							, CD_FIELD
							, NM_FIELD
					FROM	NEOE.MA_CODE
					WHERE	CD_COMPANY = #{erpCompSeq}
					AND		CD_FIELD = #{codeType}
				) A INNER JOIN (
					/* ERPiU 공통코드 디테일 */
					SELECT	CD_COMPANY
							, CD_FIELD
							, CD_SYSDEF
							, NM_SYSDEF
					FROM	NEOE.MA_CODEDTL
					WHERE	CD_COMPANY = #{erpCompSeq}
					AND		CD_FIELD = #{codeType}
					AND		USE_YN = N'Y'
				) B ON A.CD_COMPANY = B.CD_COMPANY AND A.CD_FIELD = B.CD_FIELD
	]]></select>
</mapper>